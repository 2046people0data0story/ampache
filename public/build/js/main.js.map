{"version":3,"sources":["ajax.js","base.js","dynamicpage.js","jplayer.playlist.ext.js","search.js","slideshow.js","tabledata.js","tools.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["// vim:set softtabstop=4 shiftwidth=4 expandtab:\r\n//\r\n// Copyright 2001 - 2015 Ampache.org\r\n//\r\n// This program is free software; you can redistribute it and/or\r\n// modify it under the terms of the GNU General Public License v2\r\n// as published by the Free Software Foundation.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with this program; if not, write to the Free Software\r\n// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\r\n\r\n// Some cutesy flashing thing while we run\r\n$(document).ajaxSend(function () {\r\n    $('#ajax-loading').show();\r\n});\r\n$(document).ajaxComplete(function () {\r\n    $('#ajax-loading').hide();\r\n});\r\n\r\n// ajaxPost\r\n// Post the contents of a form.\r\nfunction ajaxPost(url, input, source) {\r\n    if ($(source)) {\r\n        $(source).off('click');\r\n    } \r\n    $.ajax(url, { success: processContents, type: 'post', data: $('#'+input).serialize() });\r\n} // ajaxPost\r\n\r\n// ajaxPut\r\n// Get response from the specified URL.\r\nfunction ajaxPut(url, source) {\r\n    if ($(source)) {\r\n        $(source).off('click');\r\n    }\r\n    $.ajax(url, { success: processContents, type: 'get', dataType: 'xml' });\r\n} // ajaxPut\r\n\r\n// ajaxState\r\n// Post the contents of a form without doing any observe() things.\r\nfunction ajaxState(url, input) {\r\n    $.ajax({\r\n        url     : url,\r\n        type    : 'POST',\r\n        data    : $('#' + input).serialize(true),\r\n        success : processContents\r\n     });\r\n} // ajaxState\r\n\r\n// processContents\r\n// Iterate over a response and do any updates we received.\r\nfunction processContents(data) {\r\n    $(data).find('content').each(function () {\r\n        $('#' + $(this).attr('div')).html($(this).text());\r\n    });\r\n} // processContents\r\n\r\n","// vim:set softtabstop=4 shiftwidth=4 expandtab:\r\n//\r\n// Copyright 2001 - 2015 Ampache.org\r\n// All rights reserved.\r\n//\r\n// This program is free software; you can redistribute it and/or\r\n// modify it under the terms of the GNU General Public License v2\r\n// as published by the Free Software Foundation.\r\n//\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with this program; if not, write to the Free Software\r\n// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\r\n//\r\n$(document).ready(function () {\r\n    initTabs();\r\n\t$.ajaxSetup({\r\n\t\t// Enable caching of AJAX responses, including script and jsonp\r\n\t\tcache: true\r\n\t});\r\n\t$('#notification').click(function() {\r\n\t\tclearNotification();\r\n\t});\r\n});\r\n\r\nfunction initTabs()\r\n{\r\n    $('.default_hidden').hide();\r\n\r\n    $(\"#tabs li\").click(function() {\r\n        $(\"#tabs li\").removeClass('tab_active');\r\n        $(this).addClass(\"tab_active\");\r\n        $(\".tab_content\").hide();\r\n        var selected_tab = $(this).find(\"a\").attr(\"href\");\r\n        $(selected_tab).fadeIn();\r\n\r\n        return false;\r\n    });\r\n}\r\n\r\n$(function() {\r\n    var rightmenu = $(\"#rightbar\");\r\n    var pos = rightmenu.offset();\r\n    if (rightmenu.hasClass('rightbar-float')) {\r\n        $(window).scroll(function() {\r\n            var rightsubmenu = $(\"#rightbar .submenu\");\r\n            if ($(this).scrollTop() > (pos.top)) {\r\n                rightmenu.addClass('fixedrightbar');\r\n                rightsubmenu.addClass('fixedrightbarsubmenu');\r\n            }\r\n            else if ($(this).scrollTop() <= pos.top && rightmenu.hasClass('fixedrightbar')) {\r\n                rightmenu.removeClass('fixedrightbar');\r\n                rightsubmenu.removeClass('fixedrightbarsubmenu');\r\n            }\r\n            else {\r\n                rightmenu.offset({ left: pos.left, top: pos.top });\r\n            }\r\n        })\r\n    }\r\n});\r\n\r\n// flipField\r\n// Toggles the disabled property on the specifed field\r\nfunction flipField(field) {\r\n    if ($(field).disabled == false) {\r\n        $(field).disabled = true;\r\n    }\r\n    else {\r\n        $(field).disabled = false;\r\n    }\r\n}\r\n\r\n// updateText\r\n// Changes the specified elements innards. Used for the catalog mojo fluff.\r\nfunction updateText(field, value) {\r\n    $('#'+field).html(value);\r\n}\r\n\r\n// toggleVisible\r\n// Toggles display type between block and none. Used for ajax loading div.\r\nfunction toggleVisible(element) {\r\n    var target = $('#' + element);\r\n    if (target.is(':visible')) {\r\n        target.hide();\r\n    } else {\r\n        target.show();\r\n    }\r\n}\r\n\r\nvar notificationTimeout = null;\r\nfunction displayNotification(message, timeout) {\r\n    if (notificationTimeout != null || !message) {\r\n        clearNotification();\r\n    }\r\n\t\r\n\tif (message) {\r\n\t\tif ($('#webplayer').css('display') !== 'block') {\r\n\t\t\t$('#notification').css('bottom', '20px');\r\n\t\t} else {\r\n\t\t\t$('#notification').css('bottom', '120px');\r\n\t\t}\r\n\t\t$('#notification-content').html(message);\r\n\t\t$('#notification').removeClass('notification-out');\r\n\t\tnotificationTimeout = setTimeout(function() {\r\n\t\t\tclearNotification();\r\n\t\t}, timeout);\r\n\t}\r\n}\r\n\r\nfunction clearNotification() {\r\n\tclearTimeout(notificationTimeout);\r\n\tnotificationTimeout = null;\r\n\t$('#notification').addClass(\"notification-out\");\r\n}\r\n\r\n// delayRun\r\n// This function delays the run of another function by X milliseconds\r\nfunction delayRun(element, time, method, page, source) {\r\n    var function_string = method + '(\\'' + page + '\\',\\'' + source + '\\')';\r\n    var action = function () { eval(function_string); };\r\n\r\n    if (element.zid) {\r\n        clearTimeout(element.zid);\r\n    }\r\n\r\n    element.zid = setTimeout(action, time);\r\n}\r\n\r\n// reloadUtil\r\n// Reload our util frame\r\n// IE issue fixed by Spocky, we have to use the iframe for Democratic Play &\r\n// Localplay, which don't actually prompt for a new file\r\nfunction reloadUtil(target) {\r\n    $('#util_iframe').prop('src', target);\r\n}\r\n\r\nfunction reloadDivUtil(target) {\r\n    var $util = $(\"#util_div\");\r\n    $.get(target, function (data, status, xhr) {\r\n        var $response = $(data);\r\n        $util.empty().append($response);\r\n    });\r\n}\r\n\r\n// reloadRedirect\r\n// Send them elsewhere\r\nfunction reloadRedirect(target) {\r\n    window.location = target;\r\n}\r\n","function loadContentData(data, status, jqXHR)\r\n{\r\n    var $response = $(data);\r\n\t\r\n\tif ($response.find(\"#guts\").length === 0) {\r\n\t\t$(\"body\").undelegate(\"a\");\r\n\t\t$(\"body\").undelegate(\"form\");\r\n\t\t$(\"body\").empty().append($response);\r\n\t} else {\r\n\t\tvar $mainContent = $(\"#content\");\r\n\t\tvar $pageWrap    = $(\"#guts\");\r\n\t\t$mainContent.empty().append($response.find(\"#guts\"));\r\n\t\t$mainContent.fadeIn(200, function() {\r\n\t\t\t$pageWrap.animate({\r\n\t\t\t\theight: $mainContent.height() + \"px\"\r\n\t\t\t});\r\n\t\t});\r\n\t\t$(\"a[rel^='prettyPhoto']\").prettyPhoto({social_tools:false});\r\n\t\tinitTabs();\r\n\t}\r\n}\r\n\r\nfunction loadContentPage(url)\r\n{\r\n    var $mainContent = $(\"#content\");\r\n\r\n    $mainContent\r\n        .find(\"#guts\")\r\n        .fadeOut(200, function() {\r\n            $.get(url, function (data, status, jqXHR) {\r\n                loadContentData(data, status, jqXHR);\r\n            }, 'html');\r\n        });\r\n}\r\n\r\nvar sseSource = null;\r\nfunction sse_worker(url) {\r\n\tif(typeof(EventSource) !== \"undefined\") {\r\n\t\tsseSource = new EventSource(url);\r\n\t\tsseSource.onmessage = function(event) {\r\n\t\t\teval(event.data);\r\n\t\t};\r\n\t\tsseSource.onopen = function() {\r\n\t\t\tdisplayNotification('Connected through Server-Sent Events, processing...', 5000);\r\n\t\t};\r\n\t\tsseSource.onerror = function() {\r\n\t\t\tdisplayNotification('Server-Sent Events connection error. Re-connection...', 5000);\r\n\t\t};\r\n\t} else {\r\n\t\t// Server-Sent Events not supported, call the update in ajax and the output result\r\n\t\t$.get(url + '&html=1', function (data) {\r\n\t\t\t$(\"#guts\").append(data);\r\n\t\t}, 'html')\r\n\t}\r\n}\r\n\r\nfunction stop_sse_worker() {\r\n\tif (sseSource !== null) {\r\n\t\tsseSource.close();\r\n\t\tsseSource = null;\r\n\t}\r\n}\r\n\r\nfunction display_sse_error(error) {\r\n\tdisplayNotification('ERROR: ' + error, 10000);\r\n}\r\n\r\nfunction NavigateTo(url)\r\n{\r\n    window.location.hash = url.substring(jsWebPath.length + 1);\r\n}\r\n\r\nfunction getCurrentPage()\r\n{\r\n    if (window.location.hash.length > 0) {\r\n        var wpage = window.location.hash.substring(1);\r\n        if (wpage !== 'prettyPhoto') {\r\n            return btoa(wpage);\r\n        } else {\r\n            return \"\";\r\n        }\r\n    }\r\n\r\n    return btoa(window.location.href.substring(jsWebPath.length + 1));\r\n}\r\n\r\n$(function() {\r\n\r\n    var newHash      = \"\";\r\n    \r\n    $(\"body\").delegate(\"a\", \"click\", function() {\r\n        var link = $(this).attr(\"href\");\r\n        if (link !== undefined && link != \"\" && link.indexOf(\"javascript:\") != 0 && link != \"#\" && link != undefined && $(this).attr(\"onclick\") == undefined && $(this).attr(\"rel\") != \"nohtml\" && $(this).attr(\"target\") != \"_blank\") {\r\n            if ($(this).attr(\"rel\") != \"prettyPhoto\") {\r\n                // Ajax load Ampache pages only\r\n                if (link.indexOf(jsWebPath) > -1) {\r\n                    window.location.hash = link.substring(jsWebPath.length + 1);\r\n                    return false;\r\n                }\r\n            } else {\r\n                window.location.hash = $(this).attr(\"rel\");\r\n                return false;\r\n            }\r\n        }\r\n    });\r\n    \r\n    $(\"body\").delegate(\"form\", \"submit\", function(e) {\r\n        // We do not support ajax post with files or login form, neither specific target\r\n        var $file = $(this).find(\"input[type=file]\");\r\n        if ($(this).attr('name') !== 'login' && $(this).attr('name') !== 'export' && (!$file || !$file.val() || $file.val() === \"\") && ($(this).attr('target') === undefined || $(this).attr('target') === '')) {\r\n            var postData = $(this).serializeArray();\r\n            var formURL = $(this).attr(\"action\");\r\n\r\n\t\t\tif (formURL.indexOf('javascript:') !== 0) {\r\n\t\t\t\t$.ajax(\r\n\t\t\t\t{\r\n\t\t\t\t\turl : formURL,\r\n\t\t\t\t\ttype: \"POST\",\r\n\t\t\t\t\tdata : postData,\r\n\t\t\t\t\tsuccess:function(data, status, jqXHR)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tloadContentData(data, status, jqXHR);\r\n\t\t\t\t\t\twindow.location.hash = \"\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(jqXHR, status, errorThrown)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\talert(errorThrown);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n        }\r\n    });\r\n    \r\n    $(window).bind('hashchange', function(){\r\n        newHash = window.location.hash.substring(1);\r\n        if (newHash && newHash.indexOf(\"prettyPhoto\") != 0) {\r\n            loadContentPage(jsWebPath + '/' + newHash);\r\n            return false;\r\n        };\r\n    });\r\n    \r\n    $(window).trigger('hashchange');\r\n\r\n});","'use strict';\r\n\r\njPlayerPlaylist.prototype._createListItem = function(media) {\r\n        var self = this;\r\n\r\n        // Wrap the <li> contents in a <div>\r\n        var attrClass = ' class=\"playlist-row ';\r\n        if ('string' === typeof media.attrClass) {\r\n            attrClass += media.attrClass;\r\n        }\r\n        attrClass += '\" ';\r\n\r\n        var listItem = \"<li\" + attrClass + \" name=\\\"\" + $(jplaylist.cssSelector.playlist + \" ul li\").length + \"\\\" \" +\r\n\t\t\t\t\"data-poster=\\\"\" + media['poster'] + \"\\\" data-media_id=\\\"\" + media['media_id'] + \"\\\" data-album_id=\\\"\" + media['album_id'] + \"\\\" data-artist_id=\\\"\" + media['artist_id'] + \"\\\" \" +\r\n\t\t\t\t\"data-replaygain_track_gain=\\\"\" + media['replaygain_track_gain'] + \"\\\" data-replaygain_track_peak=\\\"\" + media['replaygain_track_peak'] + \"\\\" data-replaygain_album_gain=\\\"\" + media['replaygain_album_gain'] + \"\\\" data-replaygain_album_peak=\\\"\" + media['replaygain_album_peak'] + \"\\\"\" +\r\n\t\t\t\t\"><div>\";\r\n\r\n        // Create image\r\n        // listItem += \"<img class=\\\"cover\\\" src=\\\"\" + media.cover + \"\\\" alt=\\\"\" + media.title + \"\\\"/>\";\r\n\r\n        // Create remove control\r\n        listItem += \"<a href='javascript:;' class='\" + this.options.playlistOptions.removeItemClass + \"'>&times;</a>\";\r\n\r\n        // Create song links\r\n        if (media['media_id']) {\r\n            listItem += \"<span class=\\\"jp-free-media menu\\\"><a></a></span>\";\r\n        }\r\n\r\n        // The title is given next in the HTML otherwise the float:right on the free media corrupts in IE6/7\r\n        listItem += \"<a href='javascript:;' class='\" + this.options.playlistOptions.itemClass + \"' tabindex='1'>\" + media.title + (media.artist ? \" <span class='jp-artist'>by \" + media.artist + \"</span>\" : \"\") + \"</a>\";\r\n        listItem += \"</div></li>\";\r\n\r\n        return listItem;\r\n};\r\n\r\n// TODO: take away the playlistName\r\njPlayerPlaylist.prototype.rmTrack = function(trackId, playlistName) {\r\n    playlistName = playlistName || 'default';\r\n    // $.bootstrapMessageLoading();\r\n    $.post('/playlist/rmtrack', {\r\n        playlist: playlistName,\r\n        trackId: trackId\r\n    }, function (data) {\r\n        // $.bootstrapMessageAuto(data[0], data[1]);\r\n        if ('error' === data[1]) {\r\n            $.loadPlaylist();\r\n        }\r\n    }, 'json').error(function (e) {\r\n        $.bootstrapMessageAuto('An error occured while trying to remove the track from your playlist.', 'error');\r\n    });\r\n}\r\n\r\n\r\njPlayerPlaylist.prototype.remove = function(index) {\r\n    var self = this;\r\n\r\n    console.log(\"remove track \" + index);\r\n\r\n    if (index === undefined) {\r\n        this._initPlaylist([]);\r\n        this._refresh(function() {\r\n            $(self.cssSelector.jPlayer).jPlayer(\"clearMedia\");\r\n            self.scan();\r\n        });\r\n        return true;\r\n    } else {\r\n\r\n        if (this.removing) {\r\n            return false;\r\n        } else {\r\n            index = (index < 0) ? self.original.length + index : index; // Negative index relates to end of array.\r\n            if (0 <= index && index < this.playlist.length) {\r\n                this.removing = true;\r\n\r\n                if ('playlist' === jplaylist.type) {\r\n                    console.log('delete track index ' + index);\r\n                    var trackId = $($('.jp-playlist-item-remove')[index]).parent().parent().attr('track_id')\r\n                    jplaylist.rmTrack(trackId, jplaylist.name);\r\n                }\r\n\r\n                $(this.cssSelector.playlist + \" li:nth-child(\" + (index + 1) + \")\").slideUp(this.options.playlistOptions.removeTime, function() {\r\n                    $(this).remove();\r\n\r\n                    if (self.shuffled) {\r\n                        var item = self.playlist[index];\r\n                        $.each(self.original, function(i,v) {\r\n                            if (self.original[i] === item) {\r\n                                self.original.splice(i, 1);\r\n                                return false; // Exit $.each\r\n                            }\r\n                        });\r\n                        self.playlist.splice(index, 1);\r\n                    } else {\r\n                        self.original.splice(index, 1);\r\n                        self.playlist.splice(index, 1);\r\n                    }\r\n\r\n                    if (self.original.length) {\r\n                        if (index === self.current) {\r\n                            self.current = (index < self.original.length) ? self.current : self.original.length - 1; // To cope when last element being selected when it was removed\r\n                            self.select(self.current);\r\n                        } else if (index < self.current) {\r\n                            self.current--;\r\n                        }\r\n                    } else {\r\n                        $(self.cssSelector.jPlayer).jPlayer(\"clearMedia\");\r\n                        self.current = 0;\r\n                        self.shuffled = false;\r\n                        self._updateControls();\r\n                    }\r\n\r\n                    self.removing = false;\r\n                    self.scan();\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n};\r\n\r\njPlayerPlaylist.prototype.removeAll = function() {\r\n    this.original = [];\r\n    this._originalPlaylist();\r\n    $(this.cssSelector.playlist + \" ul\").html(' ');\r\n};\r\n\r\njPlayerPlaylist.prototype.scan = function() {\r\n    var self = this;\r\n    var isAdjusted = false;\r\n\r\n    var replace = [];\r\n    var maxName = 0; // maximum value that name attribute assumes.\r\n    $.each($(this.cssSelector.playlist + \" ul li\"), function(index, value) {\r\n        if ($(value).attr('name') > maxName)\r\n            maxName = parseInt($(value).attr('name'));\r\n    });\r\n\r\n    var diffCount = maxName + 1 != $(this.cssSelector.playlist + \" ul li\").length; // Flag that marks if the number of \"ul li\" elements doesn't match the name attribute counting.\r\n\r\n    $.each($(this.cssSelector.playlist + \" ul li\"), function(index, value) {\r\n        if (!diffCount) {\r\n            replace[index] = self.original[$(value).attr('name')];\r\n            if (!isAdjusted && self.current === parseInt($(value).attr('name'), 10)) {\r\n                self.current = index;\r\n                isAdjusted = true;\r\n            }\r\n        }\r\n        $(value).attr('name', index);\r\n    });\r\n\r\n    if (!diffCount) {\r\n        this.original = replace;\r\n        this._originalPlaylist();\r\n    }\r\n};\r\n\r\n\r\njPlayerPlaylist.prototype.setCurrent = function(current) {\r\n    this.current = current;\r\n    this.select(this.current);\r\n};\r\n\r\njPlayerPlaylist.prototype.play = function(index) {\r\n    index = (index < 0) ? this.original.length + index : index; // Negative index relates to end of array.\r\n\r\n    if ('function' === typeof this.options.callbackPlay) {\r\n        this.options.callbackPlay(index);\r\n    }\r\n\r\n    if (0 <= index && index < this.playlist.length) {\r\n        if (this.playlist.length) {\r\n            this.select(index);\r\n            $(this.cssSelector.jPlayer).jPlayer(\"play\");\r\n        }\r\n    } else if (index === undefined) {\r\n        $(this.cssSelector.jPlayer).jPlayer(\"play\");\r\n    }\r\n};\r\n\r\njPlayerPlaylist.prototype._highlight = function(index) {\r\n    $(this.cssSelector.title + \" li:first\").html('Playlist: ' + this.name);\r\n    $(this.cssSelector.title + \" li:last\").html(' ');\r\n    if (this.playlist.length && index !== undefined) {\r\n        $(this.cssSelector.playlist + \" .jp-playlist-current\").removeClass(\"jp-playlist-current\");\r\n        $(this.cssSelector.playlist + \" li:nth-child(\" + (index + 1) + \")\").addClass(\"jp-playlist-current\").find(\".jp-playlist-item\").addClass(\"jp-playlist-current\");\r\n        $(this.cssSelector.title + \" li:last\").html(this.playlist[index].title + (this.playlist[index].artist ? \" <span class='jp-artist'>by \" + this.playlist[index].artist + \"</span>\" : \"\"));\r\n    }\r\n};\r\n\r\njPlayerPlaylist.prototype.addAfter = function(media, idx) {\r\n    if (idx >= this.original.length || idx < 0) {\r\n        console.log(\"jPlayerPlaylist.addAfter: ERROR, Index out of bounds\");\r\n        return;\r\n    }\r\n\r\n    $(this.cssSelector.playlist + \" ul\")\r\n        .find(\"li[name=\" + idx + \"]\").after(this._createListItem(media)).end()\r\n        .find(\"li:last-child\").hide().slideDown(this.options.playlistOptions.addTime);\r\n\r\n    this._updateControls();\r\n    this.original.splice(idx + 1, 0, media);\r\n    this.playlist.splice(idx + 1, 0, media);\r\n\r\n    if(this.original.length === 1) {\r\n        this.select(0);\r\n    }\r\n};\r\n\r\n$(document).ready(function() {\r\n});\r\n","// vim:set softtabstop=4 shiftwidth=4 expandtab:\r\n//\r\n// Copyright 2010 - 2015 Ampache.org\r\n// All rights reserved.\r\n//\r\n// This program is free software; you can redistribute it and/or\r\n// modify it under the terms of the GNU General Public License v2\r\n// as published by the Free Software Foundation.\r\n//\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with this program; if not, write to the Free Software\r\n// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\r\n\r\nvar rowIter = 1;\r\nvar rowCount = 0;\r\n\r\nvar SearchRow = {\r\n    add: function (ruleType, operator, input, subtype) {\r\n        if (typeof(ruleType) != 'string') {\r\n            ruleType = 0;\r\n        }\r\n        else {\r\n            jQuery.each(types, function(i) {\r\n                if (types[i].name == ruleType) {\r\n                    ruleType = i;\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n\r\n        if (typeof(operator) != 'string') {\r\n            operator = 0;\r\n        }\r\n        else {\r\n            if (ruleType != null) {\r\n                var opts = basetypes[types[ruleType].type];\r\n                jQuery.each(opts, function(i) {\r\n                    if (opts[i].name == operator) {\r\n                        operator = i;\r\n                        return false;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        var row = document.createElement('tr');\r\n        var cells = new Array();\r\n        for (var i = 0 ; i < 5 ; i++) {\r\n            cells[i] = document.createElement('td');\r\n        }\r\n\r\n        cells[0].appendChild(SearchRow.constructOptions(ruleType, rowIter));\r\n\t\tvar select = SearchRow.createSubtypeOptions(ruleType, rowIter, subtype);\r\n\t\tif (select) {\r\n\t\t\tcells[0].appendChild(select);\r\n\t\t}\r\n        cells[1].appendChild(SearchRow.constructOperators(ruleType, rowIter, operator));\r\n        cells[2].appendChild(SearchRow.constructInput(ruleType, rowIter, input));\r\n        cells[3].innerHTML = removeIcon;\r\n\r\n        jQuery.each(cells, function(i) {\r\n            row.appendChild(cells[i]);\r\n        });\r\n\r\n        $('#searchtable').append(row);\r\n        rowCount++;\r\n\r\n        $(cells[3]).on('click', function(){if(rowCount > 1) { $(this).parent().remove(); rowCount--; }});\r\n\r\n        rowIter++;\r\n    },\r\n    constructInput: function(ruleType, ruleNumber, input) {\r\n        if (input === null || input === undefined) {\r\n            input = '';\r\n        }\r\n\r\n        widget = types[ruleType].widget;\r\n\r\n        var inputNode  = document.createElement(widget['0']);\r\n        inputNode.id   = 'rule_' + ruleNumber + '_input';\r\n        inputNode.name = 'rule_' + ruleNumber + '_input';\r\n\r\n        switch(widget['0']) {\r\n            case 'input':\r\n                inputNode.setAttribute('type', widget['1']);\r\n                inputNode.setAttribute('value', input);\r\n\t\t\t\tbreak;\r\n            case 'select':\r\n                jQuery.each(widget['1'], function(i) {\r\n                    var option = document.createElement('option');\r\n                    if ( isNaN(parseInt(widget['1'][i])) ) {\r\n                        realvalue = i;\r\n                    }\r\n                    else {\r\n                        realvalue = parseInt(widget['1'][i]);\r\n                    }\r\n                    if ( input == realvalue ) {\r\n                        option.selected = true;\r\n                    }\r\n                    option.value = realvalue;\r\n                    option.innerHTML = widget['1'][i];\r\n                    inputNode.appendChild(option);\r\n                });\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'subtypes':\r\n\t\t\t\tinputNode = document.createElement(widget[1][0]);\r\n\t\t\t\tinputNode.id = 'rule_' + ruleNumber + '_input';\r\n\t\t\t\tinputNode.name = 'rule_' + ruleNumber + '_input';\r\n\t\t\t\tinputNode.setAttribute('type', widget[1][1]);\r\n\t\t\t\tinputNode.setAttribute('value', input);\r\n\t\t\t\tbreak;\r\n        }\r\n\r\n        return inputNode;\r\n    },\r\n    constructOptions: function(ruleType, ruleNumber) {\r\n        var optionsNode  = document.createElement('select');\r\n        optionsNode.id   = 'rule_' + ruleNumber;\r\n        optionsNode.name = 'rule_' + ruleNumber;\r\n\r\n        jQuery.each(types, function(i) {\r\n            var option = document.createElement('option');\r\n            option.innerHTML = types[i].label;\r\n            option.value = types[i].name;\r\n            if ( i == ruleType ) {\r\n                option.selected = true;\r\n            }\r\n            optionsNode.appendChild(option);\r\n        });\r\n\r\n        $(optionsNode).change(SearchRow.update);\r\n\r\n        return optionsNode;\r\n    },\r\n    constructOperators: function(ruleType, ruleNumber, operator) {\r\n        var operatorNode    = document.createElement('select');\r\n        operatorNode.id        = 'rule_' + ruleNumber + '_operator';\r\n        operatorNode.name    = 'rule_' + ruleNumber + '_operator';\r\n\r\n        basetype = types[ruleType].type;\r\n        operatorNode.className    = 'operator' + basetype;\r\n\r\n        var opts = basetypes[basetype];\r\n        jQuery.each(opts, function(i) {\r\n            var option = document.createElement('option');\r\n            option.innerHTML = opts[i].description;\r\n            option.value = i;\r\n            if (i == operator) {\r\n                option.selected = true;\r\n            }\r\n            operatorNode.appendChild(option);\r\n        });\r\n\r\n        return operatorNode;\r\n    },\r\n    update: function() {\r\n        var r_findID = /rule_(\\d+)/;\r\n        var targetID = r_findID.exec(this.id)[1];\r\n\r\n        var operator = $('#rule_' + targetID + '_operator');\r\n        if (operator.className != 'operator' + types[this.selectedIndex].type) {\r\n            var operator_cell = operator.parent();\r\n            operator.remove();\r\n            operator_cell.append(SearchRow.constructOperators(this.selectedIndex, targetID));\r\n        }\r\n\r\n\t\tvar type = $(this).val();\r\n\r\n\t\tjQuery.each(types, function (index, value) {\r\n\t\t\tif (value.name == type) {\r\n\t\t\t\ttype = value\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (type['widget'][0] == 'subtypes') {\r\n\t\t\tvar $select = SearchRow.createSelect({\r\n\t\t\t\tname: 'rule_' + targetID + '_subtype'\r\n\t\t\t}, type['subtypes']);\r\n\t\t\t$(this).after($select);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$(this).closest('tr').find('select[name=\"subtype\"]').remove();\r\n\t\t}\r\n\r\n\t\tvar input = $('#rule_' + targetID + '_input');\r\n        if (input.type == 'text') {\r\n            var oldinput = input.value;\r\n        }\r\n\r\n        var input_cell = input.parent();\r\n        input.remove();\r\n        input_cell.append(SearchRow.constructInput(this.selectedIndex, targetID, oldinput));\r\n    },\r\n\tcreateSelect: function (attributes, options, selected) {\r\n\t\tvar $select = $('<select>');\r\n\t\t$.each(attributes, function (key, value) {\r\n\t\t\t$select.attr(key, value);\r\n\t\t});\r\n\r\n\t\t$.each(options, function (key, value) {\r\n\t\t\t$('<option>').attr('value', key).text(value).appendTo($select);\r\n\t\t});\r\n\t\t$select.val(selected);\r\n\t\treturn $select;\r\n\t},\r\n\tcreateSubtypeOptions: function (ruleType, ruleNumber, subtype) {\r\n\t\tvar type = types[ruleType];\r\n\r\n\t\tvar input;\r\n\t\tif (type['widget'][0] == 'subtypes') {\r\n\t\t\tvar $input = SearchRow.createSelect({\r\n\t\t\t\tname: 'rule_' + ruleNumber + '_subtype'\r\n\t\t\t}, type['subtypes'], subtype);\r\n\t\t\treturn $input[0];\r\n\t\t}\r\n\t}\r\n};\r\n\r\n$.widget( \"custom.catcomplete\", $.ui.autocomplete, {\r\n    _renderItem: function( ul, item ) {\r\n            var itemhtml = \"\";\r\n            if (item.link !== '') {\r\n                itemhtml += \"<a href='\" + item.link + \"'>\";\r\n            } else {\r\n                itemhtml += \"<a>\";\r\n            }\r\n            if (item.image != '') {\r\n                itemhtml += \"<img src='\" + item.image + \"' class='searchart' />\";\r\n            }\r\n            itemhtml += \"<span class='searchitemtxt'>\" + item.label + ((item.rels == '') ? \"\" : \" - \" + item.rels)  + \"</span>\";\r\n            itemhtml += \"</a>\";\r\n\r\n            return $( \"<li class='ui-menu-item'>\" )\r\n                .data(\"ui-autocomplete-item\", item)\r\n                .append( itemhtml )\r\n                .appendTo( ul );\r\n    },\r\n    _renderMenu: function( ul, items ) {\r\n        var that = this, currentType = \"\";\r\n        $.each( items, function( index, item ) {\r\n            if (item.type != currentType) {\r\n                ul.append( \"<li class='ui-autocomplete-category'>\" + item.type + \"</li>\" );\r\n                currentType = item.type;\r\n            }\r\n\r\n            that._renderItem( ul, item );\r\n        });\r\n    }\r\n});\r\n\r\n$(function() {\r\n    $( \"#searchString\" )\r\n    // don't navigate away from the field on tab when selecting an item\r\n        .bind( \"keydown\", function( event ) {\r\n            if ( event.keyCode === $.ui.keyCode.TAB && $( this ).data( \"ui-autocomplete\" ).menu.active ) {\r\n                event.preventDefault();\r\n            }\r\n        })\r\n        .catcomplete({\r\n            source: function( request, response ) {\r\n                $.getJSON( jsAjaxUrl, {\r\n                    page: 'search',\r\n                    action: 'search',\r\n                    target: $('#searchStringRule').val(),\r\n                    search: request.term,\r\n                    xoutput: 'json'\r\n                }, response );\r\n            },\r\n            search: function() {\r\n                // custom minLength\r\n                if (this.value.length < 2) {\r\n                    return false;\r\n                }\r\n            },\r\n            focus: function() {\r\n                // prevent value inserted on focus\r\n                return false;\r\n            },\r\n            select: function( event, ui ) {\r\n                if (ui.item != null) {\r\n                    $(this).val(ui.item.value);\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n);","var lastaction = new Date().getTime();\r\nvar refresh_slideshow_interval = 10;\r\nvar iSlideshow = null;\r\nvar tSlideshow = null;\r\nfunction init_slideshow_check()\r\n{\r\n    if (refresh_slideshow_interval > 0) {\r\n        if (tSlideshow != null) {\r\n            clearTimeout(tSlideshow);\r\n        }\r\n        tSlideshow = window.setTimeout(function(){init_slideshow_refresh();}, refresh_slideshow_interval * 1000);\r\n    }\r\n}\r\nfunction swap_slideshow()\r\n{\r\n    if (iSlideshow == null) {\r\n        init_slideshow_refresh();\r\n    } else {\r\n        stop_slideshow();\r\n    }\r\n}\r\nfunction init_slideshow_refresh()\r\n{\r\n    if ($(\"#webplayer\").is(\":visible\")) {\r\n        clearTimeout(tSlideshow);\r\n        tSlideshow = null;\r\n\r\n        $(\"#aslideshow\").height($(document).height())\r\n          .css({'display': 'inline'});\r\n\r\n        iSlideshow = true;\r\n        refresh_slideshow();\r\n    }\r\n}\r\nfunction refresh_slideshow()\r\n{\r\n    if (iSlideshow != null) {\r\n        ajaxPut(jsAjaxUrl + '?page=index&action=slideshow', '');\r\n    } else {\r\n        init_slideshow_check();\r\n    }\r\n}\r\nfunction stop_slideshow()\r\n{\r\n    if (iSlideshow != null) {\r\n        iSlideshow = null;\r\n        $(\"#aslideshow\").css({'display': 'none'});\r\n    }\r\n}\r\nfunction update_action()\r\n{\r\n    lastaction = new Date().getTime();\r\n    stop_slideshow();\r\n    init_slideshow_check();\r\n}\r\n$(document).mousemove(function(e) {\r\n    if (iSlideshow == null) {\r\n        update_action();\r\n    }\r\n});\r\n$(document).ready(function() {\r\n    init_slideshow_check();\r\n});","// vim:set softtabstop=4 shiftwidth=4 expandtab:\r\n//\r\n// Copyright 2001 - 2015 Ampache.org\r\n// All rights reserved.\r\n//\r\n// This program is free software; you can redistribute it and/or\r\n// modify it under the terms of the GNU General Public License v2\r\n// as published by the Free Software Foundation.\r\n// \r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with this program; if not, write to the Free Software\r\n// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\r\n//\r\n\r\nInitTableData();\r\n\r\nfunction InitTableData()\r\n{\r\n\tif ($('.tabledata').mediaTable()) {\r\n        ResponsiveElements.init();\r\n        setTimeout(function() {\r\n            $('.tabledata').mediaTable('analyze');\r\n        }, 1);\r\n    }\r\n}\r\n","// vim:set softtabstop=4 shiftwidth=4 expandtab:\r\n//\r\n// Copyright 2001 - 2015 Ampache.org\r\n// All rights reserved.\r\n//\r\n// This program is free software; you can redistribute it and/or\r\n// modify it under the terms of the GNU General Public License v2\r\n// as published by the Free Software Foundation.\r\n// \r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with this program; if not, write to the Free Software\r\n// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\r\n//\r\n\r\n/***********/\r\n/* Filters */\r\n/***********/\r\n\r\nfunction showFilters(element) {\r\n    var link = $('.browse-options-link');\r\n    link.hide();\r\n    var content = $('.browse-options-content');\r\n    content.show();\r\n}\r\n\r\n/************************************************************/\r\n/* Dialog selection to add song to an existing/new playlist */\r\n/************************************************************/\r\n\r\nvar closeplaylist;\r\nfunction showPlaylistDialog(e, item_type, item_ids) {\r\n    $(\"#playlistdialog\").dialog(\"close\");\r\n\r\n    var parent = this;\r\n    parent.itemType = item_type;\r\n    parent.contentUrl = jsAjaxServer + '/edit.server.php?action=show_edit_playlist&object_type=' + item_type + '&id=' + item_ids;\r\n    parent.editDialogId = '<div id=\"playlistdialog\"></div>';\r\n\r\n    $(parent.editDialogId).dialog({\r\n        modal: false,\r\n        dialogClass: 'playlistdialogstyle',\r\n        resizable: false,\r\n        draggable: false,\r\n        width: 300,\r\n        height: 100,\r\n        autoOpen: false,\r\n\t\tposition: {\r\n\t\t\tmy: \"left+10 top\",\r\n\t\t\tof: e\r\n\t\t},\r\n        open: function () {\r\n            closeplaylist = 1;\r\n            $(document).bind('click', overlayclickclose);\r\n            $(this).load(parent.contentUrl, function() {\r\n                $('#playlistdialog').focus();\r\n            });\r\n        },\r\n        focus: function() {\r\n            closeplaylist = 0;\r\n        },\r\n        close: function (e) {\r\n            $(document).unbind('click');\r\n            $(this).empty();\r\n            $(this).dialog(\"destroy\");\r\n        }\r\n    });\r\n\r\n    $(\"#playlistdialog\").dialog(\"open\");\r\n    closeplaylist = 0;\r\n}\r\n\r\nfunction overlayclickclose() {\r\n    if (closeplaylist) {\r\n        $(\"#playlistdialog\").dialog(\"close\");\r\n    }\r\n    closeplaylist = 1;\r\n}\r\n\r\nfunction handlePlaylistAction(url, id) {\r\n    ajaxPut(url, id);\r\n    $(\"#playlistdialog\").dialog(\"close\");\r\n}\r\n\r\nfunction createNewPlaylist(title, url, id) {\r\n    var plname = window.prompt(title, '');\r\n    if (plname != null) {\r\n        url += '&name=' + plname;\r\n        handlePlaylistAction(url, id);\r\n    }\r\n}\r\n\r\n/************************************************************/\r\n/* Dialog selection to start a broadcast */\r\n/************************************************************/\r\n\r\nvar closebroadcasts;\r\nfunction showBroadcastsDialog(e) {\r\n    $(\"#broadcastsdialog\").dialog(\"close\");\r\n\r\n    var parent = this;\r\n    parent.contentUrl = jsAjaxServer + '/ajax.server.php?page=player&action=show_broadcasts';\r\n    parent.editDialogId = '<div id=\"broadcastsdialog\"></div>';\r\n\r\n    $(parent.editDialogId).dialog({\r\n        modal: false,\r\n        dialogClass: 'broadcastsdialogstyle',\r\n        resizable: false,\r\n        draggable: false,\r\n        width: 150,\r\n        height: 70,\r\n        autoOpen: false,\r\n\t\tposition: {\r\n\t\t\tmy: \"left-180 top\",\r\n\t\t\tof: e\r\n\t\t},\r\n        open: function () {\r\n            closebroadcasts = 1;\r\n            $(document).bind('click', broverlayclickclose);\r\n            $(this).load(parent.contentUrl, function() {\r\n                $('#broadcastsdialog').focus();\r\n            });\r\n        },\r\n        focus: function() {\r\n            closebroadcasts = 0;\r\n        },\r\n        close: function (e) {\r\n            $(document).unbind('click');\r\n            $(this).empty();\r\n            $(this).dialog(\"destroy\");\r\n        }\r\n    });\r\n\r\n    $(\"#broadcastsdialog\").dialog(\"open\");\r\n    closebroadcasts = 0;\r\n}\r\n\r\nfunction broverlayclickclose() {\r\n    if (closebroadcasts) {\r\n        $(\"#broadcastsdialog\").dialog(\"close\");\r\n    }\r\n    closebroadcasts = 1;\r\n}\r\n\r\nfunction handleBroadcastAction(url, id) {\r\n    ajaxPut(url, id);\r\n    $(\"#broadcastsdialog\").dialog(\"close\");\r\n}\r\n\r\n/************************************************************/\r\n/* Dialog selection to start a broadcast */\r\n/************************************************************/\r\n\r\nvar closeshare;\r\nfunction showShareDialog(e, object_type, object_id) {\r\n    $(\"#sharedialog\").dialog(\"close\");\r\n\r\n    var parent = this;\r\n    parent.contentUrl = jsAjaxServer + '/ajax.server.php?page=browse&action=get_share_links&object_type=' + object_type + '&object_id=' + object_id;\r\n    parent.editDialogId = '<div id=\"sharedialog\"></div>';\r\n\r\n    $(parent.editDialogId).dialog({\r\n        modal: false,\r\n        dialogClass: 'sharedialogstyle',\r\n        resizable: false,\r\n        draggable: false,\r\n        width: 200,\r\n        height: 90,\r\n        autoOpen: false,\r\n\t\tposition: {\r\n\t\t\tmy: \"left+10 top\",\r\n\t\t\tof: e\r\n\t\t},\r\n        open: function () {\r\n            closeshare = 1;\r\n            $(document).bind('click', shoverlayclickclose);\r\n            $(this).load(parent.contentUrl, function() {\r\n                $('#sharedialog').focus();\r\n            });\r\n        },\r\n        focus: function() {\r\n            closeshare = 0;\r\n        },\r\n        close: function (e) {\r\n            $(document).unbind('click');\r\n            $(this).empty();\r\n            $(this).dialog(\"destroy\");\r\n        }\r\n    });\r\n\r\n    $(\"#sharedialog\").dialog(\"open\");\r\n    closeshare = 0;\r\n}\r\n\r\nfunction shoverlayclickclose(e) {\r\n\tif (closeshare) {\r\n\t\t$(\"#sharedialog\").dialog(\"close\");\r\n\t}\r\n\tcloseshare = 1;\r\n}\r\n\r\nfunction handleShareAction(url) {\r\n    window.open(url);\r\n    $(\"#sharedialog\").dialog(\"close\");\r\n}\r\n\r\n\r\n/***************************************************/\r\n/* Edit modal dialog for artists, albums and songs */\r\n/***************************************************/\r\n\r\nvar tag_choices = undefined;\r\nvar label_choices = undefined;\r\n\r\nfunction showEditDialog(edit_type, edit_id, edit_form_id, edit_title, refresh_row_prefix) {\r\n    var parent = this;\r\n    parent.editFormId = 'form#' + edit_form_id;\r\n    parent.contentUrl = jsAjaxServer + '/edit.server.php?action=show_edit_object&id=' + edit_id + '&type=' + edit_type;\r\n    parent.saveUrl = jsAjaxServer + '/edit.server.php?action=edit_object&id=' + edit_id + '&type=' + edit_type;\r\n    parent.editDialogId = '<div id=\"editdialog\"></div>';\r\n    parent.refreshRowPrefix = refresh_row_prefix;\r\n    parent.editType = edit_type;\r\n    parent.editId = edit_id;\r\n\r\n    // Convert choices string (\"tag0,tag1,tag2,...\") to choices array\r\n    parent.editTagChoices = new Array();\r\n    if (tag_choices == undefined && tag_choices != '') {\r\n        // Load tag map\r\n        $.ajax(jsAjaxServer + '/ajax.server.php?page=tag&action=get_tag_map', {\r\n            success: function(data) {\r\n                tag_choices = $(data).find('content').text();\r\n                if (tag_choices != '') {\r\n                    showEditDialog(edit_type, edit_id, edit_form_id, edit_title, refresh_row_prefix);\r\n                }\r\n            }, type: 'post', dataType: 'xml'\r\n        });\r\n        return;\r\n    }\r\n\tparent.editLabelChoices = new Array();\r\n    if (label_choices == undefined && label_choices != '') {\r\n        // Load tag map\r\n        $.ajax(jsAjaxServer + '/ajax.server.php?page=tag&action=get_labels', {\r\n            success: function(data) {\r\n                label_choices = $(data).find('content').text();\r\n                if (label_choices != '') {\r\n                    showEditDialog(edit_type, edit_id, edit_form_id, edit_title, refresh_row_prefix);\r\n                }\r\n            }, type: 'post', dataType: 'xml'\r\n        });\r\n        return;\r\n    }\r\n    var splitted = tag_choices.split(',');\r\n    var i;\r\n    for (i = 0; i < splitted.length; ++i) {\r\n        parent.editTagChoices.push($.trim(splitted[i]));\r\n    }\r\n\tsplitted = label_choices.split(',');\r\n\tfor (i = 0; i < splitted.length; ++i) {\r\n        parent.editLabelChoices.push($.trim(splitted[i]));\r\n    }\r\n\r\n    parent.dialog_buttons = {};\r\n    this.dialog_buttons[jsSaveTitle] = function () {\r\n        $.ajax({\r\n            url: parent.saveUrl,\r\n            type: 'POST',\r\n            data: $(parent.editFormId).serializeArray(),\r\n            success: function (resp) {\r\n                $(\"#editdialog\").dialog(\"close\");\r\n\r\n                if (parent.refreshRowPrefix != '') {\r\n                    var new_id = $.trim(resp.lastChild.textContent);\r\n\r\n                    // resp should contain the new identifier, otherwise we take the same as the edited item\r\n                    if (new_id == '') {\r\n                        new_id = parent.editId;\r\n                    }\r\n\r\n                    var url = jsAjaxServer + '/edit.server.php?action=refresh_updated&type=' + parent.editType + '&id=' + new_id;\r\n                    // Reload only table\r\n                    $('#' + parent.refreshRowPrefix + parent.editId).load(url, function() {\r\n                        // Update the current row identifier with new id\r\n                        $('#' + parent.refreshRowPrefix + parent.editId).attr(\"id\", parent.refreshRowPrefix + new_id);\r\n                    });\r\n                } else {\r\n                    var reloadp = window.location;\r\n                    var hash = window.location.hash.substring(1);\r\n                    if (hash && hash.indexOf('.php') > -1) {\r\n                        reloadp = jsWebPath + '/' + hash;\r\n                    }\r\n                    loadContentPage(reloadp);\r\n                }\r\n            },\r\n            error: function(resp) {\r\n                $(\"#editdialog\").dialog(\"close\");\r\n            }\r\n        });\r\n    }\r\n    this.dialog_buttons[jsCancelTitle] = function() {\r\n        $(\"#editdialog\").dialog(\"close\");\r\n    }\r\n\r\n    $(parent.editDialogId).dialog({\r\n        title: edit_title,\r\n        modal: true,\r\n        dialogClass: 'editdialogstyle',\r\n        resizable: false,\r\n        width: 666,\r\n        autoOpen: false,\r\n        show: { effect: \"fade\", duration: 400 },\r\n        open: function () {\r\n            $(this).load(parent.contentUrl, function() {\r\n                if ($('#edit_tags').length > 0) {\r\n                    $(\"#edit_tags\").tagit({\r\n                        allowSpaces: true,\r\n                        singleField: true,\r\n                        singleFieldDelimiter: ',',\r\n                        availableTags: parent.editTagChoices\r\n                    });\r\n                }\r\n\t\t\t\tif ($('#edit_labels').length > 0) {\r\n                    $(\"#edit_labels\").tagit({\r\n                        allowSpaces: true,\r\n                        singleField: true,\r\n                        singleFieldDelimiter: ',',\r\n                        availableTags: parent.editLabelChoices\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        close: function (e) {\r\n            $(this).empty();\r\n            $(this).dialog(\"destroy\");\r\n        },\r\n        buttons: dialog_buttons\r\n    });\r\n\r\n    $(\"#editdialog\").dialog(\"open\");\r\n}\r\n\r\n$(window).resize(function() {\r\n    $(\"#editdialog\").dialog(\"option\", \"position\", {my: \"center\", at: \"center\", of: window});\r\n});\r\n\r\nfunction check_inline_song_edit(type, song) {\r\n    var source = '#' + type + '_select_' + song;\r\n    if ($(source + ' option:selected').val() == -1) {\r\n\t\t$(source).fadeOut(600, function() {\r\n\t\t\t$(this).replaceWith('<input type=\"text\" name=\"' + type + '_name\" value=\"New ' + type + '\" onclick=\"this.select();\" />');\r\n\t\t});\r\n    }\r\n}\r\n\r\n/*********************/\r\n/*   Sortable table  */\r\n/*********************/\r\n\r\nfunction sortPlaylistRender() {\r\n\tvar eles = $(\"tbody[id^='sortableplaylist_']\");\r\n    if (eles != null) {\r\n        var len = eles.length;\r\n        for (var i = 0; i < len; i++) {\r\n            $('#' + eles[i].id).sortable({\r\n                axis: 'y',\r\n                delay: 200\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n$(document).ready(function () {\r\n\tsortPlaylistRender();\r\n});\r\n\r\nfunction submitNewItemsOrder(itemId, tableid, rowPrefix, updateUrl, refreshAction) {\r\n    var parent = this;\r\n    parent.itemId = itemId;\r\n    parent.refreshAction = refreshAction;\r\n\r\n    var table = document.getElementById(tableid);\r\n    var rowLength = table.rows.length;\r\n\tvar offset = 0;\r\n    var finalOrder = '';\r\n\t\r\n\tif ($('#' + tableid).attr('data-offset')) {\r\n\t\toffset = $('#' + tableid).attr('data-offset');\r\n\t}\r\n\r\n    for (var i = 0; i < rowLength; ++i) {\r\n        var row = table.rows[i];\r\n        if (row.id != '') {\r\n            var songid = row.id.replace(rowPrefix, '');\r\n            finalOrder += songid + \";\"\r\n        }\r\n    }\r\n\r\n    if (finalOrder != '') {\r\n        $.ajax({\r\n            url: updateUrl,\r\n            type: 'GET',\r\n            data: 'offset=' + offset + '&order=' + finalOrder,\r\n            success: function (resp) {\r\n                var url = jsAjaxServer + '/refresh_reordered.server.php?action=' + parent.refreshAction + '&id=' + parent.itemId;\r\n                // Reload only table\r\n                $('#reordered_list_' + parent.itemId).load(url, function () {\r\n                    $('#sortableplaylist_' + parent.itemId).sortable({\r\n                        axis: 'y',\r\n                        delay: 200\r\n                    });\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction getPagePlaySettings() {\r\n    var settings = '';\r\n    var stg_subtitle = document.getElementById('play_setting_subtitle');\r\n    if (stg_subtitle !== undefined && stg_subtitle !== null) {\r\n        if (stg_subtitle.value != '') {\r\n            settings += '&subtitle=' + stg_subtitle.value;\r\n        }\r\n    }\r\n\r\n    return settings;\r\n}\r\n\r\nfunction geolocate_user() {\r\n    if(navigator.geolocation) {\r\n        navigator.geolocation.getCurrentPosition(geolocate_user_callback);\r\n    } else {\r\n        console.error(\"This browser does not support geolocation\");\r\n    }\r\n}\r\n\r\nfunction geolocate_user_callback(position) {\r\n    var url = jsAjaxUrl + '?page=stats&action=geolocation&latitude=' + position.coords.latitude + '&longitude=' + position.coords.longitude;\r\n    $.get(url);\r\n}\r\n\r\nfunction show_selected_license_link(license_select) {\r\n    var license = $('#' + license_select + ' option:selected');\r\n    var link = license.attr('data-link');\r\n    if (link !== undefined) {\r\n        window.open(link);\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}